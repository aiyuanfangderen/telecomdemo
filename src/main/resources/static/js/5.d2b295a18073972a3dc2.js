webpackJsonp([5],{"6Vqe":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("bOdI"),n=a.n(l),o=a("woOf"),i=a.n(o),r=a("Vo7i");var s={data:function(){return{is_auth_check:[{value:1,label:"控制"},{value:0,label:"不控制"}],is_display:[{value:1,label:"是"},{value:0,label:"否"}],props:{label:"name",id:"id",children:"children"},showTable:!1,fatherMenu:!1,treeData:[],tableData:[],dialogStatus:"create",textMap:{update:"编辑",create:"创建"},loading:!1,dialogFormVisible:!1,form:{menu_name:void 0,menu_english_name:void 0,menu_url:void 0,is_auth_check:void 0,is_display:void 0,menu_parent_id:void 0},currentId:-1,rules:{menu_name:[{required:!0,message:"请输入菜单名称，请不要重复",trigger:"blur"}],menu_url:[{required:!0,message:"请输入菜单详细路径",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;Object(r.a)({url:"/selectAllMenu",method:"get"}).then(function(t){console.log(t.data.data),e.treeData=t.data.data})},cancel:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.loading=!1,!1;if(t.loading=!0,-1===t.currentId){t.form.menu_parent_id=0}else t.form.menu_parent_id=t.currentId;var a,l=t.form;console.log(l),(a=l,console.log(a),Object(r.a)({url:"/insertMenu",method:"post",data:a})).then(function(e){t.loading=!1,t.dialogFormVisible=!1,t.getList(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.loading=!1})})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.loading=!1,!1;var a;t.loading=!0,(a=t.form,Object(r.a)({url:"/updateMenu",method:"post",data:a})).then(function(e){t.getNodeData(t.currentId)})})},getNodeData:function(e){var t=this;console.log(e.id),function(e){return Object(r.a)({url:"/selectMenuDetail/"+e,method:"post"})}(e.id).then(function(e){t.showTable=!0,console.log(e);var a=[];1===e.data.data.length||void 0===e.data.data.length?(a.push(e.data.data),t.tableData=a):t.tableData=e.data.data,console.log(t.tableData)}),this.currentId=e.id},handlerEdit:function(e){var t=this;this.dialogStatus="update",this.dialogFormVisible=!0,this.form=i()({},e),this.$nextTick(function(){t.$refs.form.clearValidate()})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;t.loading=!0,(a=e.id,Object(r.a)({url:"/deleteMenu2/"+a,method:"get"})).then(function(){t.loading=!1,t.getList(),t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})})})},restform:function(){var e;this.form=(e={menu_parent_id:this.currentId,menu_name:void 0,menu_english_name:void 0},n()(e,"menu_parent_id",void 0),n()(e,"menu_url",void 0),n()(e,"is_auth_check",0),n()(e,"is_display",0),e)},handlerAdd:function(){this.restform(),this.dialogStatus="create",this.dialogFormVisible=!0},handleClose:function(){this.loading=!1,this.dialogFormVisible=!1}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu"},[a("div",{staticClass:"file-edit"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handlerAdd}},[e._v("添加菜单")])],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"left",staticStyle:{"margin-top":"15px"},attrs:{span:4}},[a("el-tree",{ref:"menuTree",staticClass:"filter-tree",attrs:{data:e.treeData,props:e.props,"node-key":"id","highlight-current":"","default-expand-all":""},on:{"node-click":e.getNodeData}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],staticClass:"right",staticStyle:{"margin-top":"15px"},attrs:{span:20}},[a("el-card",{attrs:{shadow:"always"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{fit:"",data:e.tableData,height:"300"}},[a("el-table-column",{attrs:{label:"菜单名称",prop:"menu_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"菜单英文名称",prop:"menu_english_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"菜单标准路径",prop:"menu_url"}}),e._v(" "),a("el-table-column",{attrs:{label:"v",prop:"is_auth_check"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建人员",prop:"create_oper"}}),e._v(" "),a("el-table-column",{attrs:{label:"菜单图标",prop:"menu_icon"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!==t.row.menu_icon?a("span",[a("svg-icon",{attrs:{"icon-class":t.row.menu_icon.icon}})],1):e._e(),e._v(" "),null===t.row.menu_icon?a("span",[e._v("未配置菜单图标")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新人员",prop:"update_oper"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",prop:"update_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否显示",prop:"is_display"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.is_display?a("span",[e._v("是")]):e._e(),e._v(" "),0===t.row.is_display?a("span",[e._v("否")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.handlerEdit(t.row)}}},[e._v("\n              编辑\n            ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.handleDelete(t.row)}}},[e._v("\n              删除\n            ")])]}}])})],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":"left",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"菜单名称:",prop:"menu_name"}},[a("el-input",{model:{value:e.form.menu_name,callback:function(t){e.$set(e.form,"menu_name",t)},expression:"form.menu_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单英文名称:",prop:"menu_english_name"}},[a("el-input",{model:{value:e.form.menu_english_name,callback:function(t){e.$set(e.form,"menu_english_name",t)},expression:"form.menu_english_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单标准路径:",prop:"menu_url"}},[a("el-select",{attrs:{placeholder:"请选择菜单路径"},model:{value:e.form.menu_url,callback:function(t){e.$set(e.form,"menu_url",t)},expression:"form.menu_url"}},[a("el-option",{attrs:{label:"/123",value:"/123"}}),e._v(" "),a("el-option",{attrs:{label:"/456",value:"/456"}}),e._v(" "),a("el-option",{attrs:{label:"/789",value:"/789"}}),e._v(" "),a("el-option",{attrs:{label:"/1345",value:"/1345"}}),e._v(" "),a("el-option",{attrs:{label:"/4878",value:"/4878"}}),e._v(" "),a("el-option",{attrs:{label:"/487",value:"/487"}}),e._v(" "),a("el-option",{attrs:{label:"/7879",value:"/7879"}}),e._v(" "),a("el-option",{attrs:{label:"/87445",value:"/87445"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否权限控制:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.is_auth_check,callback:function(t){e.$set(e.form,"is_auth_check",t)},expression:"form.is_auth_check"}},e._l(e.is_auth_check,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.is_display,callback:function(t){e.$set(e.form,"is_display",t)},expression:"form.is_display"}},e._l(e.is_display,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.fatherMenu,expression:"fatherMenu"}],attrs:{label:"上级菜单:"}},[a("el-input",{model:{value:e.form.menu_parent_id,callback:function(t){e.$set(e.form,"menu_parent_id",t)},expression:"form.menu_parent_id"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancel("form")}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.create("form")}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,u,!1,function(e){a("X3yR")},"data-v-531f6241",null);t.default=c.exports},X3yR:function(e,t){}});
//# sourceMappingURL=5.d2b295a18073972a3dc2.js.map