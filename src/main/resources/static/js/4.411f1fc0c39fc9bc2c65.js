webpackJsonp([4],{IrpA:function(e,t){},R0ei:function(e,t){},fkUX:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("woOf"),i=l.n(a),o=l("Vze5"),n=l("Dd8w"),s=l.n(n),r=l("NYxO"),c={props:["show","roleId"],data:function(){return{loading:!1,idsRight:[],idsLeft:[],multipleLeftSelection:[],multipleRightSelection:[],roleId:void 0}},computed:s()({},Object(r.b)(["tableData","tableDataAdd"]),{dialogFormVisibleAdd:function(){return this.show},roleid:function(){return this.roleId}}),methods:{close:function(){this.$emit("update:show",!1),this.idsRight=[],this.idsLeft=[]},Selection:function(){var e=this;this.loading=!0,Object(o.b)(this.roleid,this.idsLeft).then(function(){e.idsLeft=[],e.loading=!1,console.log(e.tableData),console.log(e.idsLeft),console.log(e.tableData),e.$store.dispatch("GetUser",e.roleid),e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3})})},toggleAdd:function(){var e=this;this.loading=!0,Object(o.f)(this.roleid,this.idsRight).then(function(){e.idsRight=[],e.loading=!1,e.$store.dispatch("GetUser",e.roleid),e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3})})},handleSelectionChange:function(e){this.multipleSelection=e},handleLeftSelectionChange:function(e){var t=this;this.multipleLeftSelection=e,this.multipleLeftSelection.map(function(e){console.log(e),t.idsLeft.push(e)})},handleRightSelectionChange:function(e){var t=this;this.multipleRightSelection=e,console.log(e),this.multipleRightSelection.map(function(e){t.idsRight.push(e)})},handleClose:function(){this.loading=!1,this.show=!1,console.log(this.tableData)},toggleSelection1:function(){this.$refs.multipleTable.clearSelection()},toggleSelection2:function(){this.$refs.multipleTable.clearSelection()}}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{staticClass:"user_set",attrs:{title:"人员分配",visible:e.dialogFormVisibleAdd,height:"100%",width:"100%"},on:{close:e.close}},[l("el-row",[l("el-col",{staticClass:"left",staticStyle:{"margin-top":"15px"},attrs:{span:12}},[l("el-card",{attrs:{shadow:"always"}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("待分配角色成员")])]),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableDataAdd,"tooltip-effect":"dark",height:"300",border:""},on:{"selection-change":e.handleLeftSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:"员工ID",prop:"user_name",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"员工名称",prop:"real_name",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"所属部门",prop:"dep_name",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"所属地区",prop:"dep_area",align:"center"}})],1),e._v(" "),l("div",{staticStyle:{"margin-top":"20px"}},[l("el-button",{on:{click:e.Selection}},[e._v("添加")]),e._v(" "),l("el-button",{on:{click:e.toggleSelection1}},[e._v("取消")])],1)],1)],1),e._v(" "),l("el-col",{staticClass:"right",staticStyle:{"margin-top":"15px"},attrs:{span:12}},[l("el-card",{attrs:{shadow:"always"}},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("已有成员")])]),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{height:"300",data:e.tableData,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleRightSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"real_name",label:"员工姓名",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"user_name",label:"员工账户",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"dep_name",label:"所属部门",align:"center"}})],1),e._v(" "),l("div",{staticStyle:{"margin-top":"20px"}},[l("el-button",{on:{click:e.toggleAdd}},[e._v("去除")]),e._v(" "),l("el-button",{on:{click:e.toggleSelection2}},[e._v("取消")])],1)],1)],1)],1),e._v(">\n")],1)},staticRenderFns:[]};var u={components:{RoleUser:l("VU/8")(c,d,!1,function(e){l("R0ei")},"data-v-702869be",null).exports},data:function(){return{is_builtin:[{value:0,label:"是"},{value:1,label:"否"}],tableDataRole:[],tableDataAddRole:[],loading:!1,editM:!1,createM:!1,tableData:[],show:!1,roleId:-1,form:{role_code:"",role_name:"",role_desc:"",is_builtin:1,createTime:"",createOper:"",updateTime:"",updateOper:""},dialogStatus:"create",textMap:{update:"编辑",create:"创建"},dialogFormVisible:!1,formEdit:!0,formAdd:!0,rules:{role_code:[{required:!0,message:"请输入角色ID，ID不能重复",trigger:"blur"}],role_name:[{required:!0,message:"请输入角色名称，角色名称不能重复",trigger:"blur"}],role_desc:[{required:!0,message:"请输入角色详细信息",trigger:"blur"}]}}},created:function(){this.getTableList()},methods:{addUser:function(e){var t=this;this.$store.dispatch("GetUser",e).then(function(){t.show=!0}),this.roleId=e},getTableList:function(){var e=this;Object(o.e)().then(function(t){console.log(t),e.tableData=t.data.data,console.log(e.tableData)})},handlerAdd:function(){this.dialogStatus="create",this.restForm(),this.dialogFormVisible=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),Object(o.c)(e.id).then(function(){t.getTableList(),t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})})})},handlerEdit:function(e){var t=this;this.form=i()({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate()})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.loading=!1,!1;t.loading=!0,Object(o.g)(t.form).then(function(e){console.log(e),200===e.data.code?(t.loading=!1,t.dialogFormVisible=!1,t.getTableList(),t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.loading=!1):(t.$notify({title:"失败",message:"更新失败",type:"error",duration:2e3}),t.loading=!1)})})},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.loading=!1,!1;t.loading=!0,Object(o.a)(t.form).then(function(e){200===e.data.code?(t.loading=!1,t.dialogFormVisible=!1,t.getTableList(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.loading=!1):(t.$notify({title:"失败",message:"创建失败",type:"error",duration:2e3}),t.loading=!1)})})},cancel:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},restForm:function(){this.form={id:void 0,name:void 0,desc:void 0,isbuild:"1",updateTime:void 0,updateOper:void 0}},handleClose:function(e){this.loading=!1,this.dialogFormVisible=!1}}},f={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"role"},[l("div",{staticClass:"file-edit"},[l("el-button-group",[l("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handlerAdd}},[e._v("新建角色")])],1)],1),e._v(" "),l("el-row",[l("el-col",{staticClass:"right",staticStyle:{"margin-top":"15px"},attrs:{span:24}},[l("el-card",{attrs:{shadow:"always"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"",data:e.tableData,height:"300"}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"ID:"}},[l("span",[e._v(e._s(t.row.id))])]),e._v(" "),l("el-form-item",{attrs:{label:"角色ID:"}},[l("span",[e._v(e._s(t.row.role_code))])]),e._v(" "),l("el-form-item",{attrs:{label:"角色名称:"}},[l("span",[e._v(e._s(t.row.role_name))])]),e._v(" "),l("el-form-item",{attrs:{label:"角色描述:"}},[l("span",[e._v(e._s(t.row.role_desc))])]),e._v(" "),l("el-form-item",{attrs:{label:"是否系统内置角色:"}},[0===t.row.is_builtin?l("span",[e._v("是")]):l("span",[e._v("否")])]),e._v(" "),l("el-form-item",{attrs:{label:"创建时间:"}},[l("span",[e._v(e._s(t.row.createTime))])]),e._v(" "),l("el-form-item",{attrs:{label:"更新时间:"}},[l("span",[e._v(e._s(t.row.updateTime))])]),e._v(" "),l("el-form-item",{attrs:{label:"创建人员:"}},[l("span",[e._v(e._s(t.row.createOper))])]),e._v(" "),l("el-form-item",{attrs:{label:"更新人员:"}},[l("span",[e._v(e._s(t.row.updateOper))])])],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"角色ID",prop:"role_code",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"角色名称",prop:"role_name",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"角色描述",prop:"role_desc",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.handlerEdit(t.row)}}},[e._v("\n            编辑\n          ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.handleDelete(t.row)}}},[e._v("\n            删除\n          ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.addUser(t.row.id)}}},[e._v("\n            配置人员\n          ")])]}}])})],1)],1)],1)],1),e._v(" "),l("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"form",staticStyle:{height:"50%"},attrs:{model:e.form,inline:"",rules:e.rules}},[l("el-form-item",{attrs:{label:"角色ID:",prop:"role_code"}},[l("el-input",{model:{value:e.form.role_code,callback:function(t){e.$set(e.form,"role_code",t)},expression:"form.role_code"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"角色名称:",prop:"role_name"}},[l("el-input",{model:{value:e.form.role_name,callback:function(t){e.$set(e.form,"role_name",t)},expression:"form.role_name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"角色描述:",prop:"role_desc"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.form.role_desc,callback:function(t){e.$set(e.form,"role_desc",t)},expression:"form.role_desc"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"是否系统内置角色:"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.is_builtin,callback:function(t){e.$set(e.form,"is_builtin",t)},expression:"form.is_builtin"}},e._l(e.is_builtin,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.cancel("form")}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?l("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){e.create("form")}}},[e._v("确 定")]):l("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){e.update("form")}}},[e._v("确 定")])],1)],1),e._v(" "),l("div",{staticClass:"roleuser"},[l("role-user",{attrs:{show:e.show,roleId:e.roleId},on:{"update:show":function(t){e.show=t}}})],1)],1)},staticRenderFns:[]};var m=l("VU/8")(u,f,!1,function(e){l("IrpA")},"data-v-2650062a",null);t.default=m.exports}});
//# sourceMappingURL=4.411f1fc0c39fc9bc2c65.js.map